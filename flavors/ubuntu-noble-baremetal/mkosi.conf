# Reference: https://github.com/systemd/mkosi/blob/main/mkosi/resources/mkosi.md

[Distribution]
Distribution=ubuntu
Release=noble
Repositories=main,restricted,universe,multiverse

[Output]
Format=disk

[Partitions]
RootSize=5G

[Content]
Bootable=yes
Hostname=noblebaremetal
# For Hyper-V: linux-cloud-tools-generic
Packages=sudo,git,nano,file,less,neofetch,dnsutils,curl,tree,wget,sysstat,bash,fwupd,bash-completion,btop,htop,zsh,screen,tmux,hwdata,linux-image-generic,linux-firmware,amd64-microcode,intel-microcode,systemd-boot,linux-tools-generic,udisks2,upower,systemd-resolved,systemd-sysv,systemd-timesyncd,systemd-sysv,openssh-server,openssh-client,ssh-import-id,python3-launchpadlib,apt-utils,ca-certificates,colorized-logs,command-not-found,console-setup,efibootmgr,iproute2,lvm2,network-manager,modemmanager,nfs-common,pciutils,usbutils,dialog,whiptail,rfkill,wpasupplicant,inetutils-ping,inetutils-traceroute,inetutils-telnet,netcat-traditional,vim,locales,tpm-udev,sg3-utils-udev,dmidecode,lm-sensors,picocom
WithNetwork=yes                                                                           # let mkosi.postinst access the internet
RootPassword=rootrootroot                                                                 # The default root password
Autologin=true                                                                            # Autologin as root on consoles
# https://docs.kernel.org/admin-guide/serial-console.html
KernelCommandLine=intel_iommu=on loglevel=7 console=ttyS0,115200 console=tty0 console=ttyUSB0,115200 

Locale=en_US.UTF-8
LocaleMessages=en_US.UTF-8
Timezone=Europe/Amsterdam

KernelModulesInitrdInclude=cp210x,usbcore,usbserial,r8152,cdc_ncm # include extra modules in initrd for USB serial and ethernet adapters
